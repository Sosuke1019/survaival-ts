# survaival-ts
サバイバルTypeScript- 作って学ぶTypeScript

## 簡単な関数を作ってみよう
- type annotationはTs固有なので、ブラウザやNode.jsでは実行不可。よって、Tsコンパイラが生成してくれたJsファイルを実行環境で動かす。
- Jsファイルを本番環境にデプロイする。

## Reactでいいねボタンを作ろう
- Reactの特徴
    1. Reactはvirtual DOM(仮想DOM)を採用
        - DOM API によってHTMLとCSSをオブジェクトとして操作できる。
        - virtual DOMはリアルDOMのプロキシのようなもので、リアルDOMに比べて状態管理上のバグを起こしにくくなっている。
        - 仮想DOMを操作し、その変更はリアルDOMに伝わり、画面に描画される。
        - つまり、仮想DOMは複雑なUIをラクに実装するための仕組み。
    2. 宣言的UI
    　- どのように表示するのかの部分はなく、「このような表示になってほしい」という目標だけ書かれている。
    3. コンポーネントベース
        - コンポーネントはボタンや入力欄、フォーム、ページなどのUIの部品(大小様々)
        - コンポーネントは再利用できるので便利
        - オープンソースのコンポーネントを使うことも可能
- JSXはJsを拡張した言語で、Jsの中にXMLを直接書けるようにしたもの。JSXのTs版がTSX。
- JSXを戻り値にする関数を「関数コンポーネント」という。

## Next.jsで猫画像ジェネレータを作ろう
- Next.jsはオープンソースのUIライブラリReactをベースにしたフロントエンドフレームワーク
- Next.jsはwebpackの設定が完了された状態で開発が始められるようになっている
- pagesディレクトリ(このディレクトリ配下のディレクトリ構造がページのルーティングに対応する)に置かれたコンポーネントをNext.jsの用語でページコンポーネントと呼ぶ
- Next.jsでは1ファイルにつき1ページコンポーネントを作成する。Next.jsはpagesディレクトリの各tsxファイルを読み込み、デフォルトエクスポートされた関数をページコンポーネントとして認識する。`export default`でNext.jsにページコンポーネントと認識させる。
- APIレスポンスの取り扱いはフロントエンドでバグが混在しやすい箇所なので、型を指定することで安全にAPIレスポンスを扱えるようにする
- Next.jsでSSRを行うには、以下のデータフェッチAPIの関数を使う。データフェッチAPIを使う事でリクエスト時に初期画像を取得する。
    - getServerSideProps
    - getStatigProps
    - getInitialProps
- `module.css`で終わるファイルはCSS Modulesといい、CSSファイル内で定義したクラス名をTypeScriptからオブジェクトとして参照できるようになる

## Vercelでデプロイする
- VercelはNext.jsを開発しているVercel社が提供しているフロントエンド向けのクラウドプラットフォーム
- JsやCSSファイルを自動で圧縮してCDN環境で配信

## Jestでテストを書こう
- JestはJsのテストフレームワーク
- フロントエンドライブラリのReactやVueなどのテストだけでなく、Node.js向けのパッケージのテストも行える
- つまり、JsやTsで書かれたコードであれば、そのほとんどはJestでテストできる。
- Jestではexpect関数とマッチャ―を使って、結果が期待する値になっているかを記述する

## Reactコンポーネントのテストを書こう
- UIテストのライブラリ群`testing-library`を使ったテストの作成
    - `testing-library`には多くのクエリやアサーション、ユーザーイベントの昨日が提供されている
        - クエリ：ページ上の要素を見つけるために Testing Library が提供するメソッド
        - ユーザーイベント：インタラクションがブラウザで行われた場合に発生するイベントをディスパッチすることで、ユーザーインタラクションをシュミレーションする。
- Jestを使ったスナップショットテストの作成
    - スナップショットテストはコンポーネントの全体の状態を確かめるためのテスト。
    　(より正確には、コンポーネントのDOMをまるごと保存し、その保存したDOMと、テスト実行時にコンポーネントを描画して生成したDOMとが一致するかを確認する。)
    - スナップショットテストはUIが予期せず変更されていないかを確かめるのに有効なツール
    - 典型的なスナップショットテストでは、UIコンポーネントをレンダリングし、スナップショットを撮り、テストと一緒に保管されているスナップショットファイルと比較する。
    - 2つのスナップショットが一致しない場合テストは失敗する: 予期されない変更があったか、参照するスナップショットが新しいバージョンのUIコンポーネントに更新される必要があるかのどちらか